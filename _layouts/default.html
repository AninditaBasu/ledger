<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ page.title | default: site.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- ====================================================
       LEDGER THEME CONFIGURATION
       ==================================================== -->

  <!-- 
  THEME CONFIG CASCADE

  Priority order is like this: Preset < Site config < Page frontmatter

-->
  
  {%- assign site_cfg = site.ledger | default: {} -%}
  {%- assign page_cfg = page.ledger | default: {} -%}
  
  {%- assign preset = page_cfg.preset | default: site_cfg.preset | default: "palmleaf" -%}
  
  {%- assign site_palette = site_cfg.palette | default: {} -%}
  {%- assign page_palette = page_cfg.palette | default: {} -%}

  <style>
  :root {

    {% if preset == "night-ink" %}
      --bg-main: {{ page_palette.background
                | default: site_palette.background
                | default: "#2b1d13" }};
	   --bg-sidebar: {{ page_palette.sidebar
                | default: site_palette.sidebar
                | default: "#352417" }};
	   --bg-muted: rgba(255,255,255,0.04);
      --text-main: {{ page_palette.text-main
                | default: site_palette.text-main
                | default: "#f1d28a" }};
      --text-muted: {{ page_palette.text-muted
                | default: site_palette.text-muted
                | default: "#c9b07a" }};
      --text-heading: {{ page_palette.text-heading
                | default: site_palette.text-heading
                | default: "#ffe4a8" }};
      --border-color: {{ page_palette.border-color
                | default: site_palette.border-color
                | default: "#4a3626" }};
      --accent: {{ page_palette.accent
                | default: site_palette.accent
                | default: "#ffd57f" }};
      --table-head-bg: #3b2a1d;
      --table-row-alt-bg: #352417;
	  --code-bg: rgba(0,0,0,0.35);
	  --code-border: #5a4433;

    {% else %}
      --bg-main: {{ page_palette.background
                | default: site_palette.background
                | default: "#e3ead3" }};
	   --bg-sidebar: {{ page_palette.sidebar
                | default: site_palette.sidebar
                | default: "#d6dec3" }};
	   --bg-muted: rgba(0,0,0,0.03);
      --text-main: {{ page_palette.text-main
                | default: site_palette.text-main
                | default: "#4f3b27" }};
      --text-muted: {{ page_palette.text-muted
                | default: site_palette.text-muted
                | default: "#6a523a" }};
      --text-heading: {{ page_palette.text-heading
                | default: site_palette.text-heading
                | default: "#1a1a1a" }};
      --border-color: {{ page_palette.border-color
                | default: site_palette.border-color
                | default: "#c8c1a3" }};
      --accent: {{ page_palette.accent
                | default: site_palette.accent
                | default: "#c2854d" }};
      --table-head-bg: #d3d9b8;
      --table-row-alt-bg: #e0e6c7;
	  --code-bg: rgba(0,0,0,0.05);
	  --code-border: #d8d2c5;	  

    {% endif %}

    --font-body: {{ page_cfg.font_body | default: site_cfg.font_body | default: '"Segoe UI", Roboto, Helvetica, Arial, sans-serif' }};
    --font-mono: {{ page_cfg.font_mono | default: site_cfg.font_mono | default: 'ui-monospace, SFMono-Regular, Menlo, Consolas, monospace' }};
  }
  </style>

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="{{ '/images/favicon-32.png' | relative_url }}">
  <link rel="icon" type="image/png" sizes="192x192" href="{{ '/images/favicon-192.png' | relative_url }}">
  <link rel="apple-touch-icon" href="{{ '/images/apple-touch-icon.png' | relative_url }}">
  

  <!-- Core stylesheet -->
  <link rel="stylesheet" href="{{ '/assets/style.css' | relative_url }}">
</head>

<body>
<div class="layout">

  <aside class="sidebar">
    <div class="logo">
      <a href="{{ '/' | relative_url }}">
        <img src="{{ '/images/logo.png' | relative_url }}" alt="Logo">
      </a>
    </div>

    <div class="site-name">
      {{ site.ledger.sidebar_title | default: site.title }}
    </div>

    <nav>
      {% if site.data.navigation %}
        {% for item in site.data.navigation %}
          {% if item.url and item.title %}
            <a href="{{ item.url | relative_url }}">{{ item.title }}</a>
          {% endif %}
        {% endfor %}
      {% else %}
        <a href="{{ '/' | relative_url }}">Home</a>
      {% endif %}
    </nav>
  </aside>

  <main class="content">
    {{ content }}

    <footer>
      <hr>
      <a href="{{ site.github.repository_url }}">View on GitHub</a><br>
      &copy; {{ "now" | date: "%Y" }} {{ site.author | default: "Site author" }}
      <p>Built with the <a href="https://github.com/AninditaBasu/ledger">Ledger</a> theme for GitHub Pages.</p>
    </footer>
  </main>

</div>

<!-- Mermaid support  -->
<script>
document.addEventListener("DOMContentLoaded", function () {

  const blocks = document.querySelectorAll("pre code.language-mermaid");
  if (!blocks.length) return;

  const script = document.createElement("script");
  script.src = "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js";

  script.onload = function () {

    mermaid.initialize({
      startOnLoad: false,
      theme: "base",
      themeVariables: {
        primaryColor: "#ffffff",
        primaryTextColor: "#4f3b27",
        primaryBorderColor: "#c8c1a3",
        lineColor: "#6a523a",
        fontFamily: "Segoe UI, sans-serif"
      }
    });

    blocks.forEach((block) => {
      const div = document.createElement("div");
      div.className = "mermaid";
      div.textContent = block.textContent;
      block.parentElement.replaceWith(div);
    });

    mermaid.run();
  };

  document.head.appendChild(script);
});
</script>

</body>
</html>